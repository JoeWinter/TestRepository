<div xmlns="http://www.w3.org/1999/xhtml">
  <div style="text-align: left;">[[TableOfContents|Table of Contents]] | [[Running_Doradus_Stand-Alone|Previous]] | [[Deployment_Guidelines|Next]] | [[Index|Index]]</div>
  <div style="color: #999999; font-family: sans-serif; font-size: 10pt; text-align: left;">
    <span>[[Installing_and_Running_Doradus|Installing and Running Doradus]]</span> : Embedding Doradus In Another Application</div>
  <hr />
  <div style="color: #345A8A; font-family: &quot;Museo For Dell Regular&quot;; font-size: 13pt; font-weight: bold; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0OP0HA">Embedding Doradus In Another Application</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0NP0HA">Some applications may want to embed Doradus in the same JVM process. One way to do this is to call the static </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">main</span> method, passing a <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">String<nowiki>[</nowiki><nowiki>]</nowiki></span> that provides runtime arguments. Example:</div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0MP0HA">import com.dell.doradus.core.DoradusServer;</span></div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0LP0HA">...</span></div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0KP0HA">String<nowiki>[</nowiki><nowiki>]</nowiki> args = new String<nowiki>[</nowiki><nowiki>]</nowiki> {"-restport", "5711"};</span></div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0JP0HA">DoradusServer.main(args);</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0IP0HA">This example overrides the </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">doradus.yaml</span> parameter <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">restport</span>, setting it to <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">5711</span>. When <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">main()</span> is called, Doradus starts all internal services and the <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">storage_services</span> configured in <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">doradus.yaml</span>. However, <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">main()</span> does not return until the process receives a shutdown signal (e.g., Ctrl-C or <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">System.exit()</span> is called).</div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0HP0HA">Alternatively, Doradus can be started with the method </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">startEmbedded()</span>, which returns as soon as all internal services are initialized and started. This method accepts the same <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">args</span> parameter as <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">main()</span> plus a second <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">String<nowiki>[</nowiki><nowiki>]</nowiki></span> that allows the selective initialization of services. Example:</div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0GP0HA">String<nowiki>[</nowiki><nowiki>]</nowiki> args = new String<nowiki>[</nowiki><nowiki>]</nowiki> {"-restport", "5711"};</span></div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0FP0HA">String<nowiki>[</nowiki><nowiki>]</nowiki> services = new String<nowiki>[</nowiki><nowiki>]</nowiki> {OLAPService.class.getName(), RESTService.class.getName()};</span></div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0EP0HA">DoradusServer.startEmbedded(args, services);</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0DP0HA">This example also overrides the </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">restport</span> parameter, and it starts Doradus with the OLAP storage service and the REST service. Other optional services, such as the Task Manager service, are not initialized. Regardless of the services requested, Doradus always initializes required internal services such as the DB service (persistence layer) and schema service. The optional services that may be requested through the <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">services</span> parameter are:</div>
  <div style="margin-left: 18pt;margin-bottom: 12pt; margin-top: 12pt;">
    <table border="0" cellspacing="0" cellpadding="0" width="99%" summary="">
      <tr valign="baseline">
        <td style="width: 18pt"><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;">•	</div></td>
        <td><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;"><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;"><span id="wwpID0E0CP0HA">com.dell.doradus.mbeans.MBeanService</span></span>: Provides the JMX interface. If this service is not initialized, JMX usage metrics and administrative commands will not be available.</div></td>
      </tr>
    </table>
  </div>
  <div style="margin-left: 18pt;margin-bottom: 12pt; margin-top: 12pt;">
    <table border="0" cellspacing="0" cellpadding="0" width="99%" summary="">
      <tr valign="baseline">
        <td style="width: 18pt"><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;">•	</div></td>
        <td><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;"><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;"><span id="wwpID0E0BP0HA">com.dell.doradus.service.rest.RESTService</span></span>: Provides the Jetty-based REST API. If this service is not initialized, Doradus will not accept REST commands. However, initialized services can be called directly via their service APIs.</div></td>
      </tr>
    </table>
  </div>
  <div style="margin-left: 18pt;margin-bottom: 12pt; margin-top: 12pt;">
    <table border="0" cellspacing="0" cellpadding="0" width="99%" summary="">
      <tr valign="baseline">
        <td style="width: 18pt"><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;">•	</div></td>
        <td><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;"><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;"><span id="wwpID0E0AP0HA">com.dell.doradus.service.taskmanager.TaskManagerService</span></span>: Provides the Task Manager service. If this service is not initialized, background tasks such as data aging will not be performed.</div></td>
      </tr>
    </table>
  </div>
  <div style="margin-left: 18pt;margin-bottom: 12pt; margin-top: 12pt;">
    <table border="0" cellspacing="0" cellpadding="0" width="99%" summary="">
      <tr valign="baseline">
        <td style="width: 18pt"><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;">•	</div></td>
        <td><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;"><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;"><span id="wwpID0E06O0HA">com.dell.doradus.service.olap.OLAPService</span></span>: Provides the OLAP storage service. If this service is not initialized, new OLAP applications cannot be created and existing OLAP applications, if any, cannot be accessed.</div></td>
      </tr>
    </table>
  </div>
  <div style="margin-left: 18pt;margin-bottom: 12pt; margin-top: 12pt;">
    <table border="0" cellspacing="0" cellpadding="0" width="99%" summary="">
      <tr valign="baseline">
        <td style="width: 18pt"><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;">•	</div></td>
        <td><div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt;"><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;"><span id="wwpID0E05O0HA">com.dell.doradus.service.spider.SpiderService</span></span>: Provides the Spider storage service. If this service is not initialized, new Spider applications cannot be created and existing Spider applications, if any, cannot be accessed.</div></td>
      </tr>
    </table>
  </div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E04O0HA">The full package name of each service must be passed in the </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">services</span> parameter. At least one storage service must be initialized otherwise <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">startEmbedded()</span> will throw a <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">RuntimeException</span>. If multiple storage services are provided, the first one becomes the default for new applications created via the same Doradus instance that do not explicitly declare a storage service.</div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E03O0HA">Note that multiple Doradus instances can be launched for the same Cassandra cluster with different service sets. For example, a direct-load application could embed Doradus, initializing only the storage service that it requires, while another stand-alone instance of Doradus can be executed with full services.</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E02O0HA">When Doradus is started with the </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">startEmbedded()</span> method, it returns as soon as all requested services are initialized and running. Doradus can be gracefully shutdown by calling the <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">shutDown</span> method. Example:</div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E01O0HA">DoradusServer.shutDown();		// gracefully shutdown and return</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0ZO0HA">Alternatively, Doradus can be gracefully shutdown and terminate the JVM process by calling </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">stopServer</span>. Example:</div>
  <div style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; margin-bottom: 12pt; margin-left: 18pt; margin-top: 12pt;"><span id="wwpID0E0YO0HA">DordusServer.stopServer(null);	// gracefully shutdown and call System.exit()</span></div>
  <div style="font-family: &quot;Museo Sans For Dell Regular&quot;; font-size: 11pt; margin-bottom: 12pt; margin-top: 12pt;"><span id="wwpID0E0XO0HA">The parameter passed to </span><span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">stopServer()</span> is a <span style="color: #4A442A; font-family: Consolas; font-size: 9.5pt; font-style: normal; font-weight: normal;">String<nowiki>[</nowiki><nowiki>]</nowiki></span>, but it is ignored.</div>
</div>